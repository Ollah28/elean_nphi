# Deploy to Fly.io

## 1) Launch app

```bash
fly launch
```

Use app name `nphi-e-learning` when prompted.

## 2) Set required secrets

```bash
fly secrets set DATABASE_URL=...
fly secrets set REDIS_URL=...
fly secrets set NEXTAUTH_SECRET=...
fly secrets set JWT_ACCESS_SECRET=...
fly secrets set JWT_REFRESH_SECRET=...
```

Set other variables only if your environment requires them:

```bash
fly secrets set CORS_ORIGIN=...
fly secrets set SMTP_HOST=...
fly secrets set SMTP_PORT=...
fly secrets set SMTP_USER=...
fly secrets set SMTP_PASS=...
fly secrets set SMTP_FROM=...
fly secrets set MANAGER_EMAIL=...
fly secrets set MANAGER_PASSWORD=...
fly secrets set MANAGER_NAME=...
fly secrets set MANAGER_DEPARTMENT=...
```

## 3) Deploy

```bash
fly deploy
```

## Notes

- `fly.toml` is configured to build from `backend/Dockerfile`.
- Health endpoint is `GET /health`.
- Container startup runs `prisma generate` and `prisma migrate deploy` automatically.
